# 思考任务组配置
# 适用于需要深度思考的分析任务

name = "thinking_group"
description = "思考任务组 - 适用于需要深度思考的分析任务"

# 继承全局配置
inherits_from = "../../global.toml"

# 第一层级
[echelon1]
models = ["openai-gpt5", "anthropic-claude-3-opus"]
concurrency_limit = 3
rpm_limit = 30
priority = 1
timeout = 120
max_retries = 5
temperature = 0.8
max_tokens = 4000

[echelon1.thinking_config]
enabled = true
budget_tokens = 4000

# 第二层级
[echelon2]
models = ["openai-gpt4o", "anthropic-claude-3-sonnet"]
concurrency_limit = 8
rpm_limit = 80
priority = 2
timeout = 90
max_retries = 4
temperature = 0.8
max_tokens = 3000

[echelon2.thinking_config]
enabled = true
budget_tokens = 3000

# 第三层级
[echelon3]
models = ["openai-gpt3.5-turbo", "anthropic-claude-3-haiku"]
concurrency_limit = 15
rpm_limit = 150
priority = 3
timeout = 60
max_retries = 3
temperature = 0.8
max_tokens = 2000

[echelon3.thinking_config]
enabled = true
budget_tokens = 2000

# 降级策略
fallback_strategy = "echelon_down"

# 熔断器配置
[circuit_breaker]
failure_threshold = 5
recovery_time = 60
half_open_requests = 1

# 降级配置
[fallback_config]
strategy = "echelon_down"
fallback_groups = ["thinking_group.echelon2", "thinking_group.echelon3"]
max_attempts = 3
retry_delay = 1.0

[fallback_config.circuit_breaker]
failure_threshold = 5
recovery_time = 60
half_open_requests = 1